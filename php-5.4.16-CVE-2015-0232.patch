Adapted for 5.4.16
Upstream test dropped as binary patch not supported

From 2fc178cf448d8e1b95d1314e47eeef610729e0df Mon Sep 17 00:00:00 2001
From: Stanislav Malyshev <stas@php.net>
Date: Sun, 11 Jan 2015 00:51:05 -0800
Subject: [PATCH] Fix bug #68799: Free called on unitialized pointer

---
 ext/exif/exif.c              |   2 +-
 ext/exif/tests/bug68799.jpg  | Bin 0 -> 735 bytes
 ext/exif/tests/bug68799.phpt |  63 +++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 64 insertions(+), 1 deletion(-)
 create mode 100644 ext/exif/tests/bug68799.jpg
 create mode 100644 ext/exif/tests/bug68799.phpt

diff --git a/ext/exif/exif.c b/ext/exif/exif.c
index 637ebf9..7f95ff4 100644
--- a/ext/exif/exif.c
+++ b/ext/exif/exif.c
@@ -2700,7 +2700,7 @@
 static int exif_process_unicode(image_info_type *ImageInfo, xp_field_type *xp_field, int tag, char *szValuePtr, int ByteCount TSRMLS_DC)
 {
 	xp_field->tag = tag;	
-
+	xp_field->value = NULL;
 	/* Copy the comment */
 	if (zend_multibyte_encoding_converter(
 			(unsigned char**)&xp_field->value, 
-- 
2.1.4

